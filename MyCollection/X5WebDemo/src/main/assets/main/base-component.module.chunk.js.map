{"version":3,"sources":["D:/witontekGit/witon_git_minipay_web2017/dev/app/ng4/src/app/base-component/base-component-router.ts","D:/witontekGit/witon_git_minipay_web2017/dev/app/ng4/src/app/base-component/base-component.module.ts","D:/witontekGit/witon_git_minipay_web2017/dev/app/ng4/src/app/base-component/main-menu/main-menu.component.css","D:/witontekGit/witon_git_minipay_web2017/dev/app/ng4/src/app/base-component/main-menu/main-menu.component.html","D:/witontekGit/witon_git_minipay_web2017/dev/app/ng4/src/app/base-component/main-menu/main-menu.component.ts","D:/witontekGit/witon_git_minipay_web2017/dev/app/ng4/src/app/base-component/payment-base/payment-base.component.css","D:/witontekGit/witon_git_minipay_web2017/dev/app/ng4/src/app/base-component/payment-base/payment-base.component.html","D:/witontekGit/witon_git_minipay_web2017/dev/app/ng4/src/app/base-component/payment-base/payment-base.component.ts","D:/witontekGit/witon_git_minipay_web2017/dev/app/ng4/src/assets/images/bg.png"],"names":[],"mappings":"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","file":"base-component.module.chunk.js","sourcesContent":["// 模块内的路由设置\r\n\r\nimport {ModuleWithProviders} from '@angular/core';\r\nimport {RouterModule, Routes} from '@angular/router';\r\n\r\nimport {PathLibrary} from 'app/core/libs/path-library';\r\nimport {MainMenuComponent} from 'app/base-component/main-menu/main-menu.component';\r\nimport {OutpatientBillingBaseComponent} from 'app/base-component/outpatient-billing-base/outpatient-billing-base.component';\r\nimport {PaymentBaseComponent} from 'app/base-component/payment-base/payment-base.component';\r\n\r\nconst routes: Routes = [\r\n  {path: PathLibrary.mainMenu, component: MainMenuComponent},\r\n  {path: PathLibrary.outpatientBilling, component: OutpatientBillingBaseComponent},\r\n  {path: PathLibrary.payment, component: PaymentBaseComponent},\r\n];\r\n\r\nexport const BaseComponentRouter: ModuleWithProviders = RouterModule.forChild(routes);\r\n\n\n\n// WEBPACK FOOTER //\n// D:/witontekGit/witon_git_minipay_web2017/dev/app/ng4/src/app/base-component/base-component-router.ts","import {NgModule} from '@angular/core';\r\nimport {CommonModule} from '@angular/common';\r\nimport {NgxQRCodeModule} from '@techiediaries/ngx-qrcode';\r\n\r\nimport {SharedModule} from 'app/shared/shared.module';\r\nimport {BaseComponentRouter} from 'app/base-component/base-component-router';\r\nimport {MainMenuComponent} from 'app/base-component/main-menu/main-menu.component';\r\nimport {OutpatientBillingBaseComponent} from 'app/base-component/outpatient-billing-base/outpatient-billing-base.component';\r\nimport {PaymentBaseComponent} from 'app/base-component/payment-base/payment-base.component';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    SharedModule,\r\n    NgxQRCodeModule,\r\n    BaseComponentRouter\r\n  ],\r\n  declarations: [\r\n    MainMenuComponent,\r\n    OutpatientBillingBaseComponent,\r\n    PaymentBaseComponent,\r\n  ],\r\n  exports: [\r\n    OutpatientBillingBaseComponent,\r\n    PaymentBaseComponent,\r\n  ],\r\n})\r\nexport class BaseComponentModule {\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// D:/witontekGit/witon_git_minipay_web2017/dev/app/ng4/src/app/base-component/base-component.module.ts","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".content {\\r\\n  width: 100%;\\r\\n  height: 100%;\\r\\n  background: url(\" + require(\"../../../assets/images/bg.png\") + \") no-repeat;\\r\\n  background-size: 100% 100%;\\r\\n  display: -webkit-box;\\r\\n  display: -ms-flexbox;\\r\\n  display: flex;\\r\\n  -webkit-box-orient: horizontal;\\r\\n  -webkit-box-direction: normal;\\r\\n      -ms-flex-direction: row;\\r\\n          flex-direction: row;\\r\\n  -webkit-box-pack: center;\\r\\n      -ms-flex-pack: center;\\r\\n          justify-content: center;\\r\\n  -webkit-box-align: center;\\r\\n      -ms-flex-align: center;\\r\\n          align-items: center;\\r\\n}\\r\\n\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// D:/witontekGit/witon_git_minipay_web2017/dev/app/ng4/src/app/base-component/main-menu/main-menu.component.css\n// module id = ../../../../../src/app/base-component/main-menu/main-menu.component.css\n// module chunks = base-component.module","module.exports = \"<div class=\\\"common-page\\\">\\r\\n  <app-main-header-logo [returnBtnShow]=\\\"false\\\"></app-main-header-logo>\\r\\n  \\r\\n  <div class=\\\"content\\\">\\r\\n    <app-main-menu-item\\r\\n      *ngFor=\\\"let menuItem of menuItemList\\\"\\r\\n      [itemData]=\\\"menuItem\\\">\\r\\n    </app-main-menu-item>\\r\\n  </div>\\r\\n</div>\\r\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// D:/witontekGit/witon_git_minipay_web2017/dev/app/ng4/src/app/base-component/main-menu/main-menu.component.html\n// module id = ../../../../../src/app/base-component/main-menu/main-menu.component.html\n// module chunks = base-component.module","// 主菜单，功能选择页面\r\n\r\nimport {Component, OnDestroy, OnInit} from '@angular/core';\r\nimport {ProxyLibrary} from 'app/core/libs/proxy-library';\r\nimport {CoverItem} from 'app/core/objects/cover-item';\r\nimport {BackService} from 'app/core/services/back.service';\r\n\r\n@Component({\r\n  selector: 'app-main-menu',\r\n  templateUrl: './main-menu.component.html',\r\n  styleUrls: ['./main-menu.component.css']\r\n})\r\nexport class MainMenuComponent implements OnInit, OnDestroy {\r\n\r\n  menuItemList: Array<CoverItem>;\r\n\r\n  constructor(private backService: BackService) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    // 开启后台服务\r\n    this.backService.start();\r\n\r\n    // 初始化主菜单项的内容\r\n    this.initMenuItem();\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    // 关闭后台服务\r\n    this.backService.stop();\r\n  }\r\n\r\n  // 初始化主菜单项的内容\r\n  private initMenuItem() {\r\n    this.menuItemList = ProxyLibrary.getMenuItemData();\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// D:/witontekGit/witon_git_minipay_web2017/dev/app/ng4/src/app/base-component/main-menu/main-menu.component.ts","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*扫描二维码支付页面*/\\r\\n.content {\\r\\n  padding: 0.1562rem 0.1953rem;\\r\\n  height: 100%;\\r\\n}\\r\\n\\r\\n.balance {\\r\\n  font-size: 0.25rem;\\r\\n  color: #666;\\r\\n}\\r\\n\\r\\n.code-box {\\r\\n  background-color: #fff;\\r\\n  margin-top: 0.1562rem;\\r\\n  padding: 0.1562rem 1.4062rem;\\r\\n  font-size: 0.3594rem;\\r\\n  color: #333;\\r\\n}\\r\\n\\r\\n.money {\\r\\n  color: #ff5a4d;\\r\\n  margin-left: 0.35rem;\\r\\n}\\r\\n\\r\\n.payment-box {\\r\\n  display: -webkit-box;\\r\\n  display: -ms-flexbox;\\r\\n  display: flex;\\r\\n  -webkit-box-align: center;\\r\\n      -ms-flex-align: center;\\r\\n          align-items: center;\\r\\n  -webkit-box-pack: justify;\\r\\n      -ms-flex-pack: justify;\\r\\n          justify-content: space-between;\\r\\n  text-align: center;\\r\\n}\\r\\n\\r\\n.phone {\\r\\n  width: 1.8594rem;\\r\\n  height: 3.2656rem;\\r\\n}\\r\\n\\r\\n.wechat-tips, .alipay-tips {\\r\\n  font-size: 0.25rem;\\r\\n  color: #666;\\r\\n  text-align: center;\\r\\n}\\r\\n\\r\\n.wechat-tips > span {\\r\\n  color: #09bb07;\\r\\n}\\r\\n\\r\\n.alipay-tips > span {\\r\\n  color: #00aaf2;\\r\\n}\\r\\n\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// D:/witontekGit/witon_git_minipay_web2017/dev/app/ng4/src/app/base-component/payment-base/payment-base.component.css\n// module id = ../../../../../src/app/base-component/payment-base/payment-base.component.css\n// module chunks = base-component.module","module.exports = \"<!--扫描二维码支付页面-->\\r\\n<div class=\\\"common-page\\\">\\r\\n  <app-main-header\\r\\n    [timerShow]=\\\"true\\\"\\r\\n    [timerMax]=\\\"timerMax\\\"\\r\\n    [dataSrc]=\\\"dataSrc\\\"\\r\\n    [timerHandle]=\\\"true\\\"\\r\\n    (timerCompleted)=\\\"timerCompletedHandle($event)\\\"></app-main-header>\\r\\n  \\r\\n  <!--显示二维码UI-->\\r\\n  <div class=\\\"content\\\" *ngIf=\\\"showQRCode\\\">\\r\\n    <div class=\\\"balance\\\" *ngIf=\\\"dataSrc!=='prepaySrc'\\\">&nbsp;</div>\\r\\n    <div class=\\\"balance\\\" *ngIf=\\\"dataSrc==='prepaySrc'\\\">当前余额 ¥{{inpatientInfo.remain_amt}}</div>\\r\\n    <div class=\\\"code-box\\\">\\r\\n      <div>缴费金额<span class=\\\"money\\\">¥ {{totalAmount}}</span></div>\\r\\n      <div class=\\\"payment-box\\\">\\r\\n        <ngx-qrcode\\r\\n          [qrc-element-type]=\\\"'img'\\\"\\r\\n          [qrc-value]=\\\"payUrl\\\"\\r\\n          qrc-class=\\\"QRCode\\\"\\r\\n          qrc-errorCorrectionLevel=\\\"L\\\">\\r\\n        </ngx-qrcode>\\r\\n        <div *ngIf=\\\"paymentType==='WeChat'\\\"><img src=\\\"assets/images/iPhone_weixin.png\\\" class=\\\"phone\\\">\\r\\n          <div class=\\\"wechat-tips\\\">打开<span>微信</span>扫一扫支付</div>\\r\\n        </div>\\r\\n        <div *ngIf=\\\"paymentType==='AliPay'\\\"><img src=\\\"assets/images/iPhone_zhifubao.png\\\" class=\\\"phone\\\">\\r\\n          <div class=\\\"alipay-tips\\\">打开<span>支付宝</span>扫一扫支付</div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n  \\r\\n  <!--显示等待UI-->\\r\\n  <app-waiting\\r\\n    class=\\\"content\\\"\\r\\n    [type]=\\\"2\\\"\\r\\n    *ngIf=\\\"showWaiting\\\"></app-waiting>\\r\\n\\r\\n</div>\\r\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// D:/witontekGit/witon_git_minipay_web2017/dev/app/ng4/src/app/base-component/payment-base/payment-base.component.html\n// module id = ../../../../../src/app/base-component/payment-base/payment-base.component.html\n// module chunks = base-component.module","// 支付，扫描二维码\r\n\r\nimport {Component, OnDestroy, OnInit, ViewChild} from '@angular/core';\r\nimport {ActivatedRoute} from '@angular/router';\r\nimport {Subscription} from 'rxjs/Rx';\r\n\r\nimport {LogService} from 'app/core/services/log.service';\r\nimport {RouterService} from 'app/core/services/router.service';\r\nimport {UserService} from 'app/core/services/user.service';\r\nimport {OutputQueryOrderStatus} from 'app/protocol/server/output-query-order-status';\r\nimport {PayLibrary} from 'app/core/libs/pay-library';\r\nimport {ProxyLibrary} from 'app/core/libs/proxy-library';\r\nimport {OutputQueryOutPatientInfo} from 'app/protocol/server/output-query-out-patient-info';\r\nimport {OutputQueryInHospitalPatient} from 'app/protocol/server/output-query-in-hospital-patient';\r\nimport {InfoLibrary} from 'app/core/libs/info-library';\r\nimport {SystemService} from 'app/core/services/system.service';\r\nimport {OrderCheckService} from 'app/core/services/order-check.service';\r\nimport {MainHeaderComponent} from 'app/shared/main-header/main-header.component';\r\n\r\n@Component({\r\n  selector: 'app-payment-base',\r\n  templateUrl: './payment-base.component.html',\r\n  styleUrls: ['./payment-base.component.css']\r\n})\r\nexport class PaymentBaseComponent implements OnInit, OnDestroy {\r\n\r\n  private static readonly waitingTimerMax: number = 60; //  显示等待UI时的倒计时时间\r\n\r\n  @ViewChild(MainHeaderComponent)\r\n  private mainHeaderComponent: MainHeaderComponent;\r\n\r\n  timerMax = 120; // 倒计时上限时间，秒\r\n\r\n  showQRCode: boolean; // 是否显示二维码UI\r\n  showWaiting: boolean; // 是否显示等待UI\r\n\r\n  outpatientInfo: OutputQueryOutPatientInfo;\r\n  inpatientInfo: OutputQueryInHospitalPatient;\r\n  paymentType: string;\r\n  totalAmount: string;\r\n  payUrl: string;\r\n  tradeNo: string;\r\n  dataSrc: string;\r\n\r\n  private orderStatusSubscription: Subscription;\r\n  private enterWaitingState: boolean;\r\n\r\n  constructor(private route: ActivatedRoute,\r\n              private routerService: RouterService,\r\n              private systemService: SystemService,\r\n              private userService: UserService,\r\n              private orderCheckService: OrderCheckService) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.enterWaitingState = false;\r\n    this.getParametersFromURL();\r\n    this.showQRCodeUI();\r\n    this.startCheckOrder(this.tradeNo);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.orderCheckService.stop();\r\n    if (this.orderStatusSubscription) {\r\n      this.orderStatusSubscription.unsubscribe();\r\n    }\r\n  }\r\n\r\n  // 定时器时间到\r\n  timerCompletedHandle(event: number) {\r\n    // 时间到，但未等到服务器确认，强制认为已失败\r\n    this.showResultFail();\r\n  }\r\n\r\n  private getParametersFromURL() {\r\n    this.route.params.subscribe(params => {\r\n      this.paymentType = params['paymentType'];\r\n      this.totalAmount = params['totalAmount'];\r\n      this.payUrl = params['payUrl'];\r\n      this.tradeNo = params['tradeNo'];\r\n      this.dataSrc = params['dataSrc'];\r\n\r\n      if (this.dataSrc === PayLibrary.dataSrcInpatient) {\r\n        this.inpatientInfo = this.userService.getInPatientInfo();\r\n      } else {\r\n        this.outpatientInfo = this.userService.getOutPatientInfo();\r\n      }\r\n    });\r\n  }\r\n\r\n  private startCheckOrder(tradeNo: string): void {\r\n    this.orderStatusSubscription = this.orderCheckService\r\n      .start(tradeNo)\r\n      .subscribe(\r\n        data => this.getOrderStatusSuc(data),\r\n        error => this.getOrderStatusErr(error)\r\n      );\r\n  }\r\n\r\n  // 查询订单状态，成功\r\n  private getOrderStatusSuc(outputQueryOrderStatus: OutputQueryOrderStatus): void {\r\n    LogService.debug('getOrderStatusSuc: ' + outputQueryOrderStatus);\r\n\r\n    if (outputQueryOrderStatus.order_status === PayLibrary.orderStatusPaying) {\r\n      // 显示二维码UI\r\n      this.showQRCodeUI();\r\n\r\n    } else if (outputQueryOrderStatus.order_status === PayLibrary.orderStatusNotStartToHIS) {\r\n      // 显示 waiting UI\r\n      this.showWaitingUI();\r\n\r\n    } else if (outputQueryOrderStatus.order_status === PayLibrary.orderStatusSucToHIS) {\r\n      // 扣费成功\r\n      this.showResultSuccess(outputQueryOrderStatus);\r\n\r\n    } else if (outputQueryOrderStatus.order_status === PayLibrary.orderStatusFailedToHIS) {\r\n      // 扣费失败\r\n      this.showResultFail();\r\n\r\n    } else if (outputQueryOrderStatus.order_status === PayLibrary.orderStatusWaitPay) {\r\n      // 统一支付渠道下单 未下单，出错处理\r\n    }\r\n\r\n  }\r\n\r\n  // 查询订单状态，失败\r\n  private getOrderStatusErr(errorMsg: string): void {\r\n    LogService.error('getOrderStatusErr: ' + errorMsg);\r\n    if (errorMsg !== InfoLibrary.networkError) {\r\n      this.showResultFail();\r\n    } else {\r\n      // 网络错误，跳去指定UI\r\n      this.systemService.gotoErrorWait();\r\n    }\r\n  }\r\n\r\n  // 显示二维码UI\r\n  protected showQRCodeUI(): void {\r\n    this.showQRCode = true;\r\n    this.showWaiting = false;\r\n  }\r\n\r\n  // 显示 waiting UI\r\n  protected showWaitingUI(): void {\r\n\r\n    if (this.enterWaitingState !== true) {\r\n      this.enterWaitingState = true;\r\n\r\n      this.showQRCode = false;\r\n      this.showWaiting = true;\r\n\r\n      // 重置倒计时时间\r\n      this.mainHeaderComponent.restartTimer(PaymentBaseComponent.waitingTimerMax);\r\n    }\r\n\r\n  }\r\n\r\n  // 显示结果，支付成功\r\n  private showResultSuccess(outputQueryOrderStatus: OutputQueryOrderStatus): void {\r\n    const paymentObj = {\r\n      orderAmount: outputQueryOrderStatus.order_amount,\r\n      orderStatus: outputQueryOrderStatus.order_status,\r\n      paymentType: this.paymentType,\r\n      dataSrc: this.dataSrc\r\n    };\r\n    this.routerService.goTo([ProxyLibrary.getPaymentResult(), paymentObj]);\r\n  }\r\n\r\n  // 显示结果，支付失败\r\n  private showResultFail(): void {\r\n    const paymentObj = {\r\n      orderStatus: 'error',\r\n      paymentType: this.paymentType\r\n    };\r\n    this.routerService.goTo([ProxyLibrary.getPaymentResult(), paymentObj]);\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// D:/witontekGit/witon_git_minipay_web2017/dev/app/ng4/src/app/base-component/payment-base/payment-base.component.ts","module.exports = __webpack_public_path__ + \"bg.2f7217ff615c8ddef72a.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// D:/witontekGit/witon_git_minipay_web2017/dev/app/ng4/src/assets/images/bg.png\n// module id = ../../../../../src/assets/images/bg.png\n// module chunks = base-component.module"],"sourceRoot":"webpack:///"}